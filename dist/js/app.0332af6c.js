(function(t){function r(r){for(var n,i,s=r[0],o=r[1],u=r[2],m=0,l=[];m<s.length;m++)i=s[m],Object.prototype.hasOwnProperty.call(a,i)&&a[i]&&l.push(a[i][0]),a[i]=0;for(n in o)Object.prototype.hasOwnProperty.call(o,n)&&(t[n]=o[n]);f&&f(r);while(l.length)l.shift()();return c.push.apply(c,u||[]),e()}function e(){for(var t,r=0;r<c.length;r++){for(var e=c[r],n=!0,s=1;s<e.length;s++){var o=e[s];0!==a[o]&&(n=!1)}n&&(c.splice(r--,1),t=i(i.s=e[0]))}return t}var n={},a={app:0},c=[];function i(r){if(n[r])return n[r].exports;var e=n[r]={i:r,l:!1,exports:{}};return t[r].call(e.exports,e,e.exports,i),e.l=!0,e.exports}i.m=t,i.c=n,i.d=function(t,r,e){i.o(t,r)||Object.defineProperty(t,r,{enumerable:!0,get:e})},i.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,r){if(1&r&&(t=i(t)),8&r)return t;if(4&r&&"object"===typeof t&&t&&t.__esModule)return t;var e=Object.create(null);if(i.r(e),Object.defineProperty(e,"default",{enumerable:!0,value:t}),2&r&&"string"!=typeof t)for(var n in t)i.d(e,n,function(r){return t[r]}.bind(null,n));return e},i.n=function(t){var r=t&&t.__esModule?function(){return t["default"]}:function(){return t};return i.d(r,"a",r),r},i.o=function(t,r){return Object.prototype.hasOwnProperty.call(t,r)},i.p="/";var s=window["webpackJsonp"]=window["webpackJsonp"]||[],o=s.push.bind(s);s.push=r,s=s.slice();for(var u=0;u<s.length;u++)r(s[u]);var f=o;c.push([0,"chunk-vendors"]),e()})({0:function(t,r,e){t.exports=e("56d7")},"17b0":function(t,r,e){},"3fcc":function(t,r,e){},"56d7":function(t,r,e){"use strict";e.r(r);e("e260"),e("e6cf"),e("cca6"),e("a79d");var n=e("7a23"),a={class:"main-layout"},c={class:"main-layout__wrap"};function i(t,r,e,i,s,o){var u=Object(n["n"])("Heading"),f=Object(n["n"])("SearchForm"),m=Object(n["n"])("ArtistInfo"),l=Object(n["n"])("SimilarArtists");return Object(n["j"])(),Object(n["e"])("div",a,[Object(n["f"])("div",c,[Object(n["g"])(u,{text:"Find your music match"}),Object(n["g"])(f,{onFormSubmit:o.onSearchFormSubmit},null,8,["onFormSubmit"]),o.isArtistInfo?(Object(n["j"])(),Object(n["c"])(m,Object(n["i"])(Object(n["h"])({key:0},s.artistInfo)),null,16)):Object(n["d"])("",!0),o.isSimilarArtists?(Object(n["j"])(),Object(n["c"])(l,{key:1,artists:s.similarArtists},null,8,["artists"])):Object(n["d"])("",!0)])])}var s=e("3835"),o=e("1da1"),u=(e("96cf"),e("b64b"),e("d3b7"),e("3ca3"),e("ddb0"),e("7db0"),{class:"heading"});function f(t,r,e,a,c,i){return Object(n["j"])(),Object(n["e"])("div",u,Object(n["o"])(e.text),1)}var m={props:{text:String}},l=(e("af57"),e("6b0d")),b=e.n(l);const p=b()(m,[["render",f],["__scopeId","data-v-634716c0"]]);var d=p,j=function(t){return Object(n["l"])("data-v-6cfc65c8"),t=t(),Object(n["k"])(),t},h={class:"search-form"},v=j((function(){return Object(n["f"])("button",{class:"search-form__button"},"Search",-1)}));function O(t,r,e,a,c,i){return Object(n["j"])(),Object(n["e"])("div",h,[Object(n["f"])("form",{class:"search-form__form",onSubmit:r[1]||(r[1]=Object(n["r"])((function(){return i.onFormSubmit&&i.onFormSubmit.apply(i,arguments)}),["prevent"]))},[Object(n["q"])(Object(n["f"])("input",{class:"search-form__input","onUpdate:modelValue":r[0]||(r[0]=function(t){return c.artist=t}),type:"text",placeholder:"Type artist name",required:""},null,512),[[n["p"],c.artist]]),v],32)])}var _={emits:["form-submit"],data:function(){return{artist:""}},methods:{onFormSubmit:function(){this.$emit("form-submit",this.artist)}}};e("c532");const g=b()(_,[["render",O],["__scopeId","data-v-6cfc65c8"]]);var y=g,w=(e("b0c0"),{class:"artist-info"}),S={class:"artist-info__name"},A=["innerHTML"],x={class:"artist-info__tags"};function k(t,r,e,a,c,i){return Object(n["j"])(),Object(n["e"])("div",w,[Object(n["f"])("div",S,Object(n["o"])(e.name),1),Object(n["f"])("div",{class:"artist-info__summary",innerHTML:e.summary},null,8,A),Object(n["f"])("div",x,[(Object(n["j"])(!0),Object(n["e"])(n["a"],null,Object(n["m"])(e.tags,(function(t){return Object(n["j"])(),Object(n["e"])("div",{class:"artist-info__tag",key:t},Object(n["o"])(t),1)})),128))])])}var I={props:{name:String,summary:String,tags:Array}};e("b961");const R=b()(I,[["render",k],["__scopeId","data-v-d31c006c"]]);var F=R,M=(e("ac1f"),e("466d"),function(t){return Object(n["l"])("data-v-73b8aab4"),t=t(),Object(n["k"])(),t}),P={class:"similar-artists"},T=M((function(){return Object(n["f"])("div",{class:"similar-artists__title"},"Similar Artists",-1)})),C={class:"similar-artists__list"},$=["href"],H={class:"similar-artists__name"};function L(t,r,e,a,c,i){return Object(n["j"])(),Object(n["e"])("div",P,[T,Object(n["f"])("div",C,[(Object(n["j"])(!0),Object(n["e"])(n["a"],null,Object(n["m"])(e.artists,(function(t){return Object(n["j"])(),Object(n["e"])("div",{class:"similar-artists__item",key:t.name},[Object(n["f"])("a",{class:"similar-artists__name",href:t.url,target:"_blank"},Object(n["o"])(t.name),9,$),Object(n["f"])("div",H,"Match: "+Object(n["o"])(t.match),1)])})),128))])])}var U={props:{artists:Array}};e("8b07");const q=b()(U,[["render",L],["__scopeId","data-v-73b8aab4"]]);var B=q,E={components:{Heading:d,SearchForm:y,ArtistInfo:F,SimilarArtists:B},data:function(){return{currentArtist:null,artistInfo:{},similarArtists:[]}},computed:{isArtistInfo:function(){return Object.keys(this.artistInfo).length>0},isSimilarArtists:function(){return this.similarArtists.length>0}},methods:{onSearchFormSubmit:function(t){var r=this;return Object(o["a"])(regeneratorRuntime.mark((function e(){var n,a,c,i,o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,r.searchArtist(t);case 2:if(n=e.sent,n&&n!==r.currentArtist){e.next=5;break}return e.abrupt("return");case 5:return r.currentArtist=n,e.prev=6,e.t0=Promise,e.next=10,r.$lastfmService.getArtistInfo(r.currentArtist);case 10:return e.t1=e.sent,e.next=13,r.$lastfmService.getSimilarArtists(r.currentArtist);case 13:return e.t2=e.sent,e.t3=[e.t1,e.t2],e.next=17,e.t0.all.call(e.t0,e.t3);case 17:a=e.sent,c=Object(s["a"])(a,2),i=c[0],o=c[1],r.artistInfo=i,r.similarArtists=o,e.next=28;break;case 25:e.prev=25,e.t4=e["catch"](6),console.error(e.t4);case 28:case"end":return e.stop()}}),e,null,[[6,25]])})))()},searchArtist:function(t){var r=this;return Object(o["a"])(regeneratorRuntime.mark((function e(){var n,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,r.$lastfmService.searchArtist(t);case 3:if(n=e.sent,0!==n.length){e.next=6;break}throw new Error("No match with artist.");case 6:return a=n.find((function(r){return r.toLowerCase()===t.toLowerCase()})),e.abrupt("return",a||n[0]);case 10:e.prev=10,e.t0=e["catch"](0),console.error(e.t0);case 13:case"end":return e.stop()}}),e,null,[[0,10]])})))()}}};e("f85a");const J=b()(E,[["render",i]]);var K=J,Q=e("5530"),N=(e("99af"),e("d81d"),e("a15b"),{_apiBase:"http://ws.audioscrobbler.com/2.0",_apiKey:"4a4f3a91b66a0be201fec84d2f9411e6",_apiFormat:"json",getResource:function(t){var r=this;return Object(o["a"])(regeneratorRuntime.mark((function e(){var n,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=r._convertToQueryString(Object(Q["a"])(Object(Q["a"])({},t),{},{api_key:r._apiKey,format:r._apiFormat})),e.next=3,fetch("".concat(r._apiBase,"?").concat(n));case 3:if(a=e.sent,a.ok){e.next=6;break}throw new Error("Could not fetch, status ".concat(a.status));case 6:return e.abrupt("return",a.json());case 7:case"end":return e.stop()}}),e)})))()},getArtistInfo:function(t){var r=this;return Object(o["a"])(regeneratorRuntime.mark((function e(){var n,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n={artist:t,method:"artist.getInfo",autocorrect:1,lang:"en"},e.next=3,r.getResource(n);case 3:return a=e.sent,e.abrupt("return",r._transformArtistInfo(a.artist));case 5:case"end":return e.stop()}}),e)})))()},getSimilarArtists:function(t){var r=this;return Object(o["a"])(regeneratorRuntime.mark((function e(){var n,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n={artist:t,method:"artist.getSimilar",autocorrect:1,limit:100},e.next=3,r.getResource(n);case 3:return a=e.sent,e.abrupt("return",r._transformSimilarArtists(a.similarartists.artist));case 5:case"end":return e.stop()}}),e)})))()},searchArtist:function(t){var r=this;return Object(o["a"])(regeneratorRuntime.mark((function e(){var n,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n={artist:t,method:"artist.search"},e.next=3,r.getResource(n);case 3:return a=e.sent,e.abrupt("return",r._transformArtistMatches(a.results.artistmatches.artist));case 5:case"end":return e.stop()}}),e)})))()},_transformArtistInfo:function(t){return{name:t.name,summary:t.bio.summary,tags:this._transformTags(t.tags.tag)}},_transformSimilarArtists:function(t){var r=this;return t.map((function(t){return{name:t.name,match:r._convertMatch(t.match),url:t.url}}))},_transformArtistMatches:function(t){return t.map((function(t){return t.name}))},_transformTags:function(t){return t.map((function(t){return t.name}))},_convertMatch:function(t){return Math.round(100*parseFloat(t))+"%"},_convertToQueryString:function(t){return Object.keys(t).map((function(r){return"".concat(encodeURIComponent(r),"=").concat(encodeURIComponent(t[r]))})).join("&")}}),V=Object(n["b"])(K);V.config.globalProperties.$lastfmService=N,V.mount("#app")},"7f18":function(t,r,e){},"81b8":function(t,r,e){},"8b07":function(t,r,e){"use strict";e("17b0")},af57:function(t,r,e){"use strict";e("7f18")},b961:function(t,r,e){"use strict";e("f247")},c532:function(t,r,e){"use strict";e("3fcc")},f247:function(t,r,e){},f85a:function(t,r,e){"use strict";e("81b8")}});
//# sourceMappingURL=app.0332af6c.js.map